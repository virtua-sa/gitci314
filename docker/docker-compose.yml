gitlab:
  build: ./gitlab
  cpu_shares: 1024
  mem_limit: 512M
  memswap_limit: 3584M
  privileged: true
  ports:
    - '22:22'
    - '80:80'
    - '443:443'
  volumes: 
    - ../srv/gitlab/config:/etc/gitlab
    - ../srv/gitlab/data:/var/opt/gitlab
    - ../srv/gitlab/logs:/var/log/gitlab

runner:
  build: ./gitlab-runner
  cpu_shares: 256
  mem_limit: 128M
  memswap_limit: 128M
  privileged: true
  links:
    - gitlab
  volumes: 
    - ../srv/gitlab-runner:/home/gitlab-runner
    - /var/run/docker.sock:/var/run/docker.sock